#!/bin/sh
#
# Subscribe feeds in akregator from firefox
#
# Original script by bcooksley
# https://forum.kde.org/viewtopic.php?f=18&t=111965
#

if [ ! $(which akregator) ]; then
    title='Firefox Webfeeds'
    message='Akregator is not installed.'

    logger -p 'user.err' "$title: $message"
    kdialog --title "$title" --error "$message"

    exit 1
fi

pidof 'akregator' || akregator --hide-mainwindow

for url; do
    url="${url#feed://}"
    url="${url#feed:}"      # For https links (feed:https://)

    qdbus org.kde.akregator /Akregator org.kde.akregator.part.addFeedsToGroup "$url" "Imported Feeds"
done

